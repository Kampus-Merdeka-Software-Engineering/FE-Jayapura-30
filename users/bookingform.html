<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="../css/bookingform.css" />
</head>

<body>
  <section class="container">
    <a href="./home.html" class="back">
      < Back</a>
        <div class="logo">
          <img src="../images/logo2.png" alt="logo" />
        </div>
        <header>Book an Appointment</header>
        <form action="#" class="form">
          <div class="input-box">
            <label>Full Name</label>
            <input type="text" id="full-name" placeholder="Enter full name" required />
          </div>

          <div class="input-box">
            <label>Email Address</label>
            <input type="text" id="email" placeholder="Enter email address" required />
          </div>

          <div class="column">
            <div class="input-box">
              <label>Phone Number</label>
              <input type="number" id="phone-number" placeholder="Enter phone number" required />
            </div>
            <div class="input-box">
              <label>Birth Date</label>
              <input type="date" id="birth-date" placeholder="Enter birth date" required />
            </div>
          </div>
          <div class="gender-box">
            <label>Gender :</label>
            <div class="select-box">
              <select id="gender">
                <option hidden>Select Gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="prefer_not_to_say">Prefer not to say</option>
              </select>
            </div>
          </div>
          <div class="input-box address">
            <label>Choose Services</label>
            <div class="column">
              <div class="select-box">
                <select id="service">
                  <option hidden>Services</option>
                  <option>Dental Checkup</option>
                  <option>Teeth Cleaning</option>
                  <option>Cavity Fillings</option>
                  <option>Braces Installation</option>
                  <option>Teeth Whitening</option>
                  <option>Gum Treatment</option>
                  <option>Denture Fitting</option>
                </select>
              </div>
            </div>
            <div class="input-box">
              <label>Appointment Date</label>
              <input type="date" id="appointment-date" placeholder="Enter date" required />
            </div>
            <button id="submit-button">Submit</button>
        </form>
  </section>
  <script>

    document.getElementById('submit-button').addEventListener('click', async (e) => {
      e.preventDefault();

      const full_name = document.getElementById('full-name').value;
      const email = document.getElementById('email').value;
      const phone_number = document.getElementById('phone-number').value;
      const birth_date = document.getElementById('birth-date').value;
      const gender = document.getElementById('gender').value;
      const service = document.getElementById('service').value;
      const appointment_date = document.getElementById('appointment-date').value;
      const response = await fetch(' https://be-jayapura-30-production.up.railway.app/booking', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          full_name,
          email,
          phone_number,
          birth_date,
          gender,
          service,
          appointment_date,
        }),
      });

      const data = await response.json();

      if (data.success) {
        // Pendaftaran berhasil, tampilkan alert
        alert('Pendaftaran berhasil! Silakan tunggu konfirmasi.');
        // Redirect ke halaman beranda atau lakukan tindakan lain yang sesuai
        window.location.href = './confirmed.html';
      } else {
        // Pendaftaran gagal, tampilkan pesan error jika perlu
        alert('Pendaftaran gagal. Silakan coba lagi.');
      }
    });
  </script>
</body>

</html>